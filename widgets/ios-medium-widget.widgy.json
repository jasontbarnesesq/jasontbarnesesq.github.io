{
  "_widgy": {
    "formatVersion": 2,
    "exportedWith": "manual",
    "hostedUrl": "https://jasontbarnesesq.github.io/widgets/ios-medium-widget.html"
  },
  "name": "Personal Dashboard Â· iOS26",
  "description": "Medium widget: date + clock, weather (Open-Meteo), moon phase, todayâ€™s events, step count, unlock trigger, Claude shortcut",
  "family": "medium",
  "widthPt": 338,
  "heightPt": 158,
  "palette": {
    "background": "#221206",
    "accent": "#C17D2E",
    "rust": "#A64E2A",
    "sage": "#6B7A5E",
    "text": "#FAF7F2"
  },
  "fonts": [
    {
      "family": "Playfair Display",
      "weights": [
        700
      ],
      "role": "display"
    },
    {
      "family": "DM Sans",
      "weights": [
        300,
        400,
        500,
        600
      ],
      "role": "body"
    }
  ],
  "dataSources": {
    "weather": {
      "provider": "Open-Meteo",
      "apiKeyRequired": false,
      "defaultCoords": {
        "lat": 32.7767,
        "lon": -96.797
      },
      "urlParams": "?lat={lat}&lon={lon}"
    },
    "steps": {
      "urlParam": "?steps={count}",
      "widgyBridgeCall": "WidgyBridge.health.getStepCount(callback)"
    },
    "events": {
      "urlParam": "?events={jsonArray}",
      "widgyBridgeCall": "WidgyBridge.calendar.getTodayEvents(callback)"
    }
  },
  "actions": {
    "unlock": {
      "primary": "shortcuts://run-shortcut?name=Lock%20Screen",
      "fallback": "widgy://lock",
      "note": "Create a Shortcut: Shortcuts app > New > Add Action > Lock Screen"
    },
    "claude": {
      "primary": "claude://",
      "fallback": "https://claude.ai"
    }
  },
  "widgetType": "htmlCode",
  "htmlCode": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=338, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n<title>Personal Dashboard Â· iOS26 Widget</title>\n<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n<link href=\"https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600&display=swap\" rel=\"stylesheet\">\n<!--\n  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n  â•‘  iOS 26 Medium Widget  Â·  338 Ã— 158 pt                  â•‘\n  â•‘  Compatible with App Widgy (HTML Widget)                 â•‘\n  â•‘                                                          â•‘\n  â•‘  Features:                                               â•‘\n  â•‘  1. Today's mini events list (up to 3)                   â•‘\n  â•‘  2. Current day & date                                   â•‘\n  â•‘  3. Current weather  (Open-Meteo, free, no key)         â•‘\n  â•‘  4. Current moon phase (Jean Meeus algorithm)            â•‘\n  â•‘  5. Total daily step count                               â•‘\n  â•‘  6. Unlock trigger button                                â•‘\n  â•‘  7. One-tap shortcut to open Claude                      â•‘\n  â•‘                                                          â•‘\n  â•‘  Data injection via URL parameters (Widgy / Shortcuts):  â•‘\n  â•‘    ?lat=32.7&lon=-96.7   override GPS coords             â•‘\n  â•‘    ?temp=72&wdesc=Sunny&wicon=â˜€ï¸&loc=Dallas              â•‘\n  â•‘    ?steps=8432                                           â•‘\n  â•‘    ?events=[{\"title\":\"Standup\",\"start\":\"2026-02-25T09:00\"},...] â•‘\n  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n-->\n<style>\n/* â”€â”€ Reset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */\n*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }\n\n/* â”€â”€ Design tokens (jasontbarnes.com palette) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */\n:root {\n  --ochre:      #C17D2E;\n  --ochre-dk:   #A86820;\n  --rust:       #A64E2A;\n  --sienna:     #7A3B1E;\n  --bark:       #3D2B1A;\n  --bark-deep:  #221206;\n  --bark-mid:   #5C4230;\n  --bark-lt:    #8B6B50;\n  --sage:       #6B7A5E;\n  --sage-lt:    #8A9B7C;\n  --parch:      #EDE3D0;\n  --parch-dk:   #D9C9AE;\n  --warm-white: #FAF7F2;\n  --sep:        rgba(193,125,46,0.22);\n  --r:          22px;\n}\n\n/* â”€â”€ Page wrapper (web preview) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */\nbody {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  /* warm linen â€” echoes the site's parchment palette */\n  background: linear-gradient(135deg, #C4A882 0%, #B8976C 100%);\n  font-family: 'DM Sans', system-ui, sans-serif;\n  -webkit-font-smoothing: antialiased;\n}\n\n/* â”€â”€ Widget shell â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */\n.widget {\n  position: relative;\n  width: 338px;\n  height: 158px;\n  /* Rich bark base with diagonal warmth */\n  background:\n    linear-gradient(135deg, rgba(193,125,46,0.11) 0%, transparent 52%),\n    linear-gradient(315deg, rgba(122,59,30,0.14) 0%, transparent 52%),\n    #221206;\n  border-radius: var(--r);\n  border: 1px solid rgba(193,125,46,0.22);\n  overflow: hidden;\n  display: grid;\n  grid-template-columns: 88px 1fr;\n  grid-template-rows: 1fr 36px;\n  box-shadow:\n    0 1px 0 rgba(212,148,63,0.14) inset,   /* top specular edge  */\n    0 16px 44px rgba(34,18,6,0.70),\n    0 2px  8px  rgba(34,18,6,0.45);\n}\n\n/* Warm ochre glow â€” upper left */\n.widget::before {\n  content: '';\n  position: absolute;\n  top: -55px; left: -35px;\n  width: 210px; height: 190px;\n  background: radial-gradient(circle, rgba(193,125,46,0.18) 0%, transparent 68%);\n  pointer-events: none;\n  z-index: 0;\n}\n\n/* Sienna warmth â€” lower right */\n.widget::after {\n  content: '';\n  position: absolute;\n  bottom: -45px; right: -25px;\n  width: 170px; height: 150px;\n  background: radial-gradient(circle, rgba(166,78,42,0.16) 0%, transparent 66%);\n  pointer-events: none;\n  z-index: 0;\n}\n\n/* â”€â”€ LEFT PANEL: Date â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */\n.col-date {\n  grid-column: 1;\n  grid-row: 1;\n  position: relative;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 13px 9px 10px 13px;\n  border-right: 1px solid var(--sep);\n}\n\n.date-weekday {\n  font-family: 'DM Sans', system-ui, sans-serif;\n  font-size: 8px;\n  font-weight: 600;\n  letter-spacing: 0.18em;\n  text-transform: uppercase;\n  color: var(--ochre);\n  line-height: 1;\n}\n\n/* Playfair Display gives the date number a legal-journal gravitas */\n.date-day {\n  font-family: 'Playfair Display', Georgia, 'Times New Roman', serif;\n  font-size: 50px;\n  font-weight: 700;\n  letter-spacing: -1px;\n  line-height: 0.95;\n  color: var(--warm-white);\n  margin-top: 2px;\n}\n\n.date-month {\n  font-family: 'DM Sans', system-ui, sans-serif;\n  font-size: 9px;\n  font-weight: 400;\n  color: var(--parch-dk);\n  text-transform: uppercase;\n  letter-spacing: 0.09em;\n  margin-top: 4px;\n}\n\n.date-clock {\n  font-family: 'DM Sans', system-ui, sans-serif;\n  font-size: 12px;\n  font-weight: 300;\n  color: var(--bark-lt);\n  letter-spacing: 0.02em;\n  margin-top: 5px;\n}\n\n/* â”€â”€ RIGHT PANEL: Info + Events â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */\n.col-main {\n  grid-column: 2;\n  grid-row: 1;\n  position: relative;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 10px 12px 8px 10px;\n  gap: 6px;\n  overflow: hidden;\n}\n\n/* Weather + Moon row */\n.row-info {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-shrink: 0;\n}\n\n.weather {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.weather-icon { font-size: 16px; line-height: 1; }\n\n.weather-temp {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--warm-white);\n  letter-spacing: -0.2px;\n  line-height: 1;\n}\n\n.weather-sub {\n  font-size: 8.5px;\n  color: var(--parch-dk);\n  line-height: 1;\n  margin-top: 1px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 110px;\n}\n\n.moon {\n  display: flex;\n  align-items: center;\n  gap: 3px;\n  flex-shrink: 0;\n}\n\n.moon-icon { font-size: 14px; line-height: 1; }\n\n.moon-label {\n  font-size: 8.5px;\n  color: var(--parch-dk);\n  white-space: nowrap;\n}\n\n/* Events */\n.events-section {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 0;\n  min-height: 0;\n  overflow: hidden;\n}\n\n.events-label {\n  font-family: 'DM Sans', system-ui, sans-serif;\n  font-size: 7.5px;\n  font-weight: 600;\n  letter-spacing: 0.16em;\n  text-transform: uppercase;\n  color: var(--ochre);\n  margin-bottom: 3px;\n}\n\n.event-row {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  height: 17px;\n  overflow: hidden;\n}\n\n.event-pip {\n  width: 4px;\n  height: 4px;\n  border-radius: 50%;\n  flex-shrink: 0;\n  background: var(--ochre);\n}\n.event-pip.p1 { background: var(--ochre); }\n.event-pip.p2 { background: var(--rust);  }\n.event-pip.p3 { background: var(--sage);  }\n\n.event-time {\n  font-size: 9px;\n  font-weight: 400;\n  color: var(--bark-lt);\n  min-width: 40px;\n  flex-shrink: 0;\n}\n\n.event-title {\n  font-size: 10px;\n  font-weight: 400;\n  color: var(--warm-white);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.events-empty {\n  font-size: 10px;\n  color: var(--bark-lt);\n  font-style: italic;\n  line-height: 17px;\n}\n\n/* â”€â”€ BOTTOM BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */\n.bar-bottom {\n  grid-column: 1 / 3;\n  grid-row: 2;\n  position: relative;\n  z-index: 1;\n  border-top: 1px solid var(--sep);\n  display: flex;\n  align-items: center;\n  padding: 0 10px 0 13px;\n  gap: 6px;\n}\n\n/* Steps */\n.steps-group {\n  display: flex;\n  align-items: baseline;\n  gap: 3px;\n  flex: 1;\n}\n\n.steps-icon { font-size: 12px; }\n\n.steps-val {\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--sage-lt);\n  letter-spacing: -0.3px;\n  font-variant-numeric: tabular-nums;\n}\n\n.steps-unit {\n  font-size: 8.5px;\n  color: var(--bark-lt);\n}\n\n/* Shared button styles */\n.btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 5px 9px;\n  border-radius: 8px;\n  border: 1px solid transparent;\n  text-decoration: none;\n  cursor: pointer;\n  -webkit-tap-highlight-color: transparent;\n  transition: opacity 0.12s, transform 0.08s;\n  user-select: none;\n  -webkit-user-select: none;\n}\n\n.btn:active {\n  opacity: 0.65;\n  transform: scale(0.95);\n}\n\n.btn-icon { font-size: 11px; line-height: 1; }\n\n.btn-label {\n  font-family: 'DM Sans', system-ui, sans-serif;\n  font-size: 10px;\n  font-weight: 500;\n  color: var(--warm-white);\n  white-space: nowrap;\n}\n\n/* Rust-toned unlock button */\n.btn-unlock {\n  background: rgba(166,78,42,0.22);\n  border-color: rgba(166,78,42,0.40);\n}\n\n/* Ochre-toned Claude button */\n.btn-claude {\n  background: rgba(193,125,46,0.20);\n  border-color: rgba(193,125,46,0.38);\n}\n\n/* Subtle pulse on step count */\n@keyframes step-pulse {\n  0%,100% { opacity: 1; }\n  50%      { opacity: 0.68; }\n}\n.steps-val.pulse { animation: step-pulse 2.8s ease-in-out infinite; }\n\n</style>\n</head>\n<body>\n\n<div class=\"widget\" role=\"region\" aria-label=\"Personal Dashboard Widget\">\n\n  <!-- â”€â”€ LEFT: Date â”€â”€ -->\n  <div class=\"col-date\">\n    <div class=\"date-weekday\" id=\"el-weekday\">WED</div>\n    <div class=\"date-day\"     id=\"el-day\">25</div>\n    <div class=\"date-month\"   id=\"el-month\">Feb Â· 2026</div>\n    <div class=\"date-clock\"   id=\"el-clock\">9:41 AM</div>\n  </div>\n\n  <!-- â”€â”€ RIGHT: Weather / Moon / Events â”€â”€ -->\n  <div class=\"col-main\">\n\n    <!-- Weather + Moon -->\n    <div class=\"row-info\">\n      <div class=\"weather\">\n        <span class=\"weather-icon\" id=\"el-w-icon\">â›…</span>\n        <div>\n          <div class=\"weather-temp\" id=\"el-w-temp\">72Â°F</div>\n          <div class=\"weather-sub\"  id=\"el-w-sub\">Partly Cloudy Â· Dallas</div>\n        </div>\n      </div>\n      <div class=\"moon\">\n        <span class=\"moon-icon\"  id=\"el-moon-icon\">ðŸŒ“</span>\n        <span class=\"moon-label\" id=\"el-moon-label\">First Quarter</span>\n      </div>\n    </div>\n\n    <!-- Events -->\n    <div class=\"events-section\">\n      <div class=\"events-label\">Today</div>\n      <div id=\"el-events\"><!-- populated by JS --></div>\n    </div>\n\n  </div><!-- /col-main -->\n\n  <!-- â”€â”€ BOTTOM BAR: Steps Â· Unlock Â· Claude â”€â”€ -->\n  <div class=\"bar-bottom\">\n\n    <div class=\"steps-group\">\n      <span class=\"steps-icon\">ðŸ¦¶</span>\n      <span class=\"steps-val pulse\" id=\"el-steps\">â€”</span>\n      <span class=\"steps-unit\">steps today</span>\n    </div>\n\n    <!-- Unlock trigger -->\n    <a id=\"btn-unlock\" class=\"btn btn-unlock\" href=\"#\" onclick=\"handleUnlock(event)\">\n      <span class=\"btn-icon\">ðŸ”“</span>\n      <span class=\"btn-label\">Unlock</span>\n    </a>\n\n    <!-- Open Claude -->\n    <a id=\"btn-claude\" class=\"btn btn-claude\" href=\"claude://\" onclick=\"handleClaude(event)\">\n      <span class=\"btn-icon\">âœ¦</span>\n      <span class=\"btn-label\">Claude</span>\n    </a>\n\n  </div><!-- /bar-bottom -->\n\n</div><!-- /widget -->\n\n<script>\n'use strict';\n\n/* ================================================================\n   HELPERS\n================================================================ */\nconst $ = id => document.getElementById(id);\n\nconst DAYS   = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];\nconst MONTHS = ['Jan','Feb','Mar','Apr','May','Jun',\n                'Jul','Aug','Sep','Oct','Nov','Dec'];\n\nfunction fmt12h(h, m) {\n  const ap = h < 12 ? 'AM' : 'PM';\n  const hh = h % 12 || 12;\n  return hh + ':' + String(m).padStart(2,'0') + ' ' + ap;\n}\n\nfunction esc(s) {\n  return String(s).replace(/[&<>\"']/g,\n    c => ({'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;',\"'\":'&#39;'}[c]));\n}\n\nconst params = new URLSearchParams(location.search);\n\n/* ================================================================\n   1 + 2 Â· DATE & TIME\n================================================================ */\nfunction refreshDateTime() {\n  const now = new Date();\n  $('el-weekday').textContent = DAYS[now.getDay()].toUpperCase();\n  $('el-day').textContent     = now.getDate();\n  $('el-month').textContent   = MONTHS[now.getMonth()] + ' Â· ' + now.getFullYear();\n  $('el-clock').textContent   = fmt12h(now.getHours(), now.getMinutes());\n}\n\n/* ================================================================\n   4 Â· MOON PHASE  (Jean Meeus, \"Astronomical Algorithms\")\n================================================================ */\nconst PHASES = [\n  { cap:0.025, e:'ðŸŒ‘', l:'New Moon'       },\n  { cap:0.225, e:'ðŸŒ’', l:'Wax. Crescent'  },\n  { cap:0.275, e:'ðŸŒ“', l:'First Quarter'  },\n  { cap:0.475, e:'ðŸŒ”', l:'Wax. Gibbous'   },\n  { cap:0.525, e:'ðŸŒ•', l:'Full Moon'       },\n  { cap:0.725, e:'ðŸŒ–', l:'Wan. Gibbous'   },\n  { cap:0.775, e:'ðŸŒ—', l:'Last Quarter'   },\n  { cap:0.975, e:'ðŸŒ˜', l:'Wan. Crescent'  },\n  { cap:1.001, e:'ðŸŒ‘', l:'New Moon'       },\n];\n\nfunction calcMoonPhase(date) {\n  let Y = date.getFullYear(), M = date.getMonth() + 1, D = date.getDate();\n  if (M <= 2) { Y--; M += 12; }\n  const A  = Math.floor(Y / 100);\n  const B  = 2 - A + Math.floor(A / 4);\n  const JD = Math.floor(365.25 * (Y + 4716))\n           + Math.floor(30.6001 * (M + 1))\n           + D + B - 1524.5;\n  // Days since known new moon: Jan 6.5 2000 UTC (JD 2451549.5)\n  const phase = (((JD - 2451549.5) / 29.53058867) % 1 + 1) % 1;\n  return PHASES.find(p => phase < p.cap) || PHASES[0];\n}\n\nfunction refreshMoon() {\n  const p = calcMoonPhase(new Date());\n  $('el-moon-icon').textContent  = p.e;\n  $('el-moon-label').textContent = p.l;\n}\n\n/* ================================================================\n   3 Â· WEATHER  â€” Open-Meteo API (free, no key required)\n   Override:  ?temp=72&wdesc=Sunny&wicon=â˜€ï¸&loc=Dallas\n   GPS:       ?lat=32.77&lon=-96.79\n================================================================ */\nconst WMO = {\n   0:['â˜€ï¸','Clear'],       1:['ðŸŒ¤','Mostly Clear'],  2:['â›…','Partly Cloudy'],\n   3:['â˜ï¸','Overcast'],   45:['ðŸŒ«','Foggy'],         48:['ðŸŒ«','Icy Fog'],\n  51:['ðŸŒ¦','Drizzle'],    53:['ðŸŒ¦','Drizzle'],       55:['ðŸŒ§','Heavy Drizzle'],\n  61:['ðŸŒ§','Light Rain'], 63:['ðŸŒ§','Rain'],           65:['ðŸŒ§','Heavy Rain'],\n  71:['ðŸŒ¨','Light Snow'], 73:['â„ï¸','Snow'],           75:['â„ï¸','Heavy Snow'],\n  77:['ðŸŒ¨','Snow Grains'],80:['ðŸŒ¦','Showers'],        81:['ðŸŒ§','Heavy Showers'],\n  82:['â›ˆ','Violent Showers'],95:['â›ˆ','Thunderstorm'],96:['â›ˆ','Hail'],99:['â›ˆ','Hail'],\n};\n\nfunction wmoInfo(code) {\n  if (WMO[code]) return WMO[code];\n  const k = Object.keys(WMO).map(Number).sort((a,b) => b-a).find(k => k <= code);\n  return WMO[k] || ['ðŸŒ¡','Unknown'];\n}\n\nfunction fetchWeather() {\n  // Manual URL-param override (useful when called from Widgy / Shortcuts)\n  if (params.get('temp')) {\n    $('el-w-temp').textContent = params.get('temp') + 'Â°F';\n    const desc = params.get('wdesc') || '';\n    const loc  = params.get('loc')   || '';\n    $('el-w-sub').textContent  = [desc, loc].filter(Boolean).join(' Â· ');\n    if (params.get('wicon')) $('el-w-icon').textContent = params.get('wicon');\n    return;\n  }\n  // Default coords: Dallas, TX  â€”  swap via ?lat=â€¦&lon=â€¦\n  const lat = params.get('lat') || '32.7767';\n  const lon = params.get('lon') || '-96.7970';\n  const url = `https://api.open-meteo.com/v1/forecast`\n            + `?latitude=${lat}&longitude=${lon}`\n            + `&current=temperature_2m,weather_code`\n            + `&temperature_unit=fahrenheit&timezone=auto`;\n\n  fetch(url)\n    .then(r => r.json())\n    .then(d => {\n      const temp = Math.round(d.current.temperature_2m);\n      const [emoji, desc] = wmoInfo(d.current.weather_code);\n      $('el-w-icon').textContent = emoji;\n      $('el-w-temp').textContent = temp + 'Â°F';\n      $('el-w-sub').textContent  = desc;\n    })\n    .catch(() => { /* keep placeholder values */ });\n}\n\n/* ================================================================\n   5 Â· STEP COUNT\n   Inject via URL: ?steps=8432\n   Widgy bridge:   uncomment WidgyBridge block below\n================================================================ */\nfunction loadSteps() {\n  const raw = params.get('steps');\n  if (raw) {\n    setSteps(parseInt(raw, 10));\n    return;\n  }\n\n  /* â”€â”€ Widgy health bridge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  if (typeof WidgyBridge !== 'undefined' && WidgyBridge.health) {\n    WidgyBridge.health.getStepCount(function(n) { setSteps(n); });\n    return;\n  }\n  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */\n\n  // Demo fallback\n  setSteps(8432);\n}\n\nfunction setSteps(n) {\n  $('el-steps').textContent = Number(n).toLocaleString();\n}\n\n/* ================================================================\n   1 Â· CALENDAR EVENTS  (today)\n   Inject via URL: ?events=[{\"title\":\"Standup\",\"start\":\"2026-02-25T09:00\"},...]\n   Widgy bridge:   uncomment WidgyBridge block below\n================================================================ */\nconst PIP_CLASS = ['p1','p2','p3'];\n\nfunction renderEvents(list) {\n  const el = $('el-events');\n  if (!list || list.length === 0) {\n    el.innerHTML = '<div class=\"events-empty\">No events today</div>';\n    return;\n  }\n  el.innerHTML = list.slice(0, 3).map((ev, i) => {\n    const ts = ev.start || ev.time || '';\n    const d  = ts ? new Date(ts) : null;\n    const t  = (d && !isNaN(d))\n               ? fmt12h(d.getHours(), d.getMinutes())\n               : (String(ts) || 'All Day');\n    return `<div class=\"event-row\">\n      <span class=\"event-pip ${PIP_CLASS[i]}\"></span>\n      <span class=\"event-time\">${esc(t)}</span>\n      <span class=\"event-title\">${esc(ev.title || 'Untitled')}</span>\n    </div>`;\n  }).join('');\n}\n\nfunction loadEvents() {\n  const raw = params.get('events');\n  if (raw) {\n    try { renderEvents(JSON.parse(decodeURIComponent(raw))); return; }\n    catch(e) { /* fall through */ }\n  }\n\n  /* â”€â”€ Widgy calendar bridge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  if (typeof WidgyBridge !== 'undefined' && WidgyBridge.calendar) {\n    WidgyBridge.calendar.getTodayEvents(function(events) {\n      renderEvents(events);\n    });\n    return;\n  }\n  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */\n\n  // Demo events (replace or remove in production)\n  const today = new Date();\n  const d = (h, m) => new Date(today.getFullYear(), today.getMonth(),\n                                today.getDate(), h, m).toISOString();\n  renderEvents([\n    { title: 'Team Standup',       start: d( 9,  0) },\n    { title: 'Client Call Â· Smith',start: d(14,  0) },\n    { title: 'Filing Deadline',    start: d(16, 30) },\n  ]);\n}\n\n/* ================================================================\n   6 Â· UNLOCK TRIGGER\n   Attempts (in order):\n     1. Widgy native lock command\n     2. Apple Shortcuts shortcut named \"Lock Screen\"\n     3. iOS Settings â†’ Passcode deep-link\n   All three require the matching app/shortcut to be installed.\n================================================================ */\nfunction handleUnlock(e) {\n  e.preventDefault();\n\n  // Visual tap feedback\n  const btn = $('btn-unlock');\n  btn.style.background = 'rgba(166,78,42,0.52)';\n  setTimeout(() => (btn.style.background = ''), 250);\n\n  /* â”€â”€ Widgy native â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  if (typeof WidgyBridge !== 'undefined' && WidgyBridge.lock) {\n    WidgyBridge.lock();\n    return;\n  }\n  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */\n\n  // Try Shortcuts â†’ Apple Shortcuts app must have a shortcut named \"Lock Screen\"\n  // Create it: Shortcuts app â–¸ New Shortcut â–¸ Add Action â–¸ \"Lock Screen\"\n  const attempts = [\n    'shortcuts://run-shortcut?name=Lock%20Screen',\n    'widgy://lock',\n  ];\n  attempts.forEach((url, i) =>\n    setTimeout(() => { window.location.href = url; }, i * 350)\n  );\n}\n\n/* ================================================================\n   7 Â· CLAUDE SHORTCUT\n   Opens the Claude iOS app; falls back to claude.ai in browser.\n================================================================ */\nfunction handleClaude(e) {\n  e.preventDefault();\n\n  // Try the Claude URL scheme (requires Claude app installed)\n  window.location.href = 'claude://';\n\n  // Fallback: if scheme unhandled, open web after a short delay\n  setTimeout(() => {\n    try { window.open('https://claude.ai', '_blank'); }\n    catch(_) { window.location.href = 'https://claude.ai'; }\n  }, 900);\n}\n\n/* ================================================================\n   INIT\n================================================================ */\nfunction init() {\n  refreshDateTime();\n  refreshMoon();\n  fetchWeather();\n  loadSteps();\n  loadEvents();\n\n  // Refresh clock every 30 s\n  setInterval(refreshDateTime, 30000);\n}\n\ndocument.addEventListener('DOMContentLoaded', init);\n</script>\n\n</body>\n</html>\n",
  "hostedUrl": "https://jasontbarnesesq.github.io/widgets/ios-medium-widget.html"
}